import{u as e,j as r,B as a,d as t,P as o,f as i,A as l,I as n,v as s,w as d,h as p,e as c,N as m,O as x,Q as u,U as b}from"./chunk-CiyIQ443.js";import{r as h}from"./chunk-BP8el2rJ.js";import{a as f,b as y,g,l as j}from"./index-B7Z_1TZN.js";import{u as k}from"./chunk-BMGpP_Cr.js";import{x as v,y as C,z as $,j as S}from"./chunk-B1leO6dY.js";import"./chunk-BW7e_yWW.js";import"./chunk-mLFKww0r.js";const P=()=>{const P=e(),_="dark"===P.palette.mode,w=g(_),{user:z}=f(),{enqueueSnackbar:A}=y(),{t:R}=k("common"),[I,T]=h.useState({calle:"",numero:""}),[W,E]=h.useState(!1),[M,O]=h.useState({}),[U,q]=h.useState(!1),[D,B]=h.useState(null);h.useEffect(()=>{T({calle:"Av. Corrientes",numero:"1234"})},[]);const F=e=>r=>{T(a=>({...a,[e]:r.target.value})),M[e]&&O(r=>({...r,[e]:""}))},L=()=>{q(!1)};return r.jsxs(a,{sx:{maxWidth:600,mx:"auto",p:3,minHeight:"100vh",background:"dark"===P.palette.mode?`linear-gradient(135deg, ${t(P.palette.primary.main,.05)} 0%, ${t(P.palette.secondary.main,.05)} 100%)`:`linear-gradient(135deg, ${t(P.palette.primary.main,.02)} 0%, ${t(P.palette.secondary.main,.02)} 100%)`},children:[r.jsxs(o,{elevation:8,sx:{p:4,borderRadius:3,background:"dark"===P.palette.mode?"rgba(18, 24, 38, 0.9)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:`1px solid ${t(P.palette.divider,.2)}`,boxShadow:`0 8px 32px ${t(P.palette.common.black,.1)}`},children:[r.jsxs(a,{sx:{textAlign:"center",mb:4},children:[r.jsx(i,{variant:"h4",component:"h1",sx:{fontWeight:700,color:P.palette.primary.main,mb:1,textShadow:`0 2px 4px ${t(P.palette.primary.main,.3)}`},children:R("profile_titulo")}),r.jsx(i,{variant:"body2",sx:{color:P.palette.text.secondary,opacity:.8},children:R("profile_subtitulo")})]}),r.jsxs(a,{sx:{textAlign:"center",mb:4},children:[r.jsxs(a,{sx:{position:"relative",display:"inline-block"},children:[r.jsx(l,{src:D||void 0,sx:{width:100,height:100,fontSize:"2rem",backgroundColor:P.palette.primary.main,border:`3px solid ${P.palette.primary.main}`,boxShadow:`0 4px 12px ${t(P.palette.primary.main,.4)}`},children:z?.alias?.charAt(0).toUpperCase()||"U"}),r.jsxs(n,{component:"label",sx:{position:"absolute",bottom:0,right:0,backgroundColor:w.surface.primary,border:`2px solid ${P.palette.primary.main}`,"&:hover":{backgroundColor:P.palette.primary.main,color:P.palette.primary.contrastText}},children:[r.jsx(v,{}),r.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>{const r=e.target.files?.[0];if(r){const e=new FileReader;e.onload=e=>{B(e.target?.result)},e.readAsDataURL(r)}}})]})]}),r.jsx(i,{variant:"body2",sx:{mt:1,color:P.palette.text.secondary},children:R("profile_avatar_desc")})]}),r.jsxs(a,{component:"form",onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return I.calle.trim()||(e.calle="La calle es requerida"),I.numero.trim()||(e.numero="El número es requerido"),O(e),0===Object.keys(e).length})()){E(!0);try{await new Promise(e=>setTimeout(e,1e3)),j.info("[ProfilePage] Perfil actualizado exitosamente"),q(!0),A("Perfil actualizado correctamente",{variant:"success"})}catch(r){j.error("[ProfilePage] Error al actualizar perfil:",r),A("Error al actualizar el perfil",{variant:"error"})}finally{E(!1)}}else A("Por favor, corrige los errores del formulario",{variant:"error"})},sx:{display:"flex",flexDirection:"column",gap:3},children:[r.jsx(s,{fullWidth:!0,label:R("profile_calle_label"),variant:"outlined",value:I.calle,onChange:F("calle"),error:!!M.calle,helperText:M.calle,InputProps:{startAdornment:r.jsx(d,{position:"start",children:r.jsx(C,{sx:{color:P.palette.text.secondary}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2,"&:hover fieldset":{borderColor:P.palette.primary.main},"&.Mui-focused fieldset":{borderColor:P.palette.primary.main}}}}),r.jsx(s,{fullWidth:!0,label:R("profile_numero_label"),variant:"outlined",value:I.numero,onChange:F("numero"),error:!!M.numero,helperText:M.numero,InputProps:{startAdornment:r.jsx(d,{position:"start",children:r.jsx(C,{sx:{color:P.palette.text.secondary}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2,"&:hover fieldset":{borderColor:P.palette.primary.main},"&.Mui-focused fieldset":{borderColor:P.palette.primary.main}}}}),r.jsx(p,{type:"submit",variant:"contained",size:"large",disabled:W,startIcon:W?r.jsx(c,{size:20}):r.jsx($,{}),sx:{mt:2,py:1.5,borderRadius:2,fontWeight:600,textTransform:"none",fontSize:"1.1rem",background:`linear-gradient(135deg, ${P.palette.primary.main} 0%, ${P.palette.primary.dark} 100%)`,boxShadow:`0 4px 12px ${t(P.palette.primary.main,.4)}`,"&:hover":{background:`linear-gradient(135deg, ${P.palette.primary.dark} 0%, ${P.palette.primary.main} 100%)`,boxShadow:`0 6px 20px ${t(P.palette.primary.main,.6)}`,transform:"translateY(-1px)"},"&:disabled":{background:P.palette.action.disabledBackground,color:P.palette.action.disabled}},children:W?"Guardando...":R("profile_guardar_cambios")})]})]}),r.jsxs(m,{open:U,onClose:L,PaperProps:{sx:{borderRadius:3,background:w.surface.primary,boxShadow:`0 8px 32px ${t(P.palette.common.black,.2)}`}},children:[r.jsxs(x,{sx:{textAlign:"center",pb:1},children:[r.jsx(a,{sx:{display:"flex",justifyContent:"center",mb:2},children:r.jsx(S,{sx:{fontSize:60,color:P.palette.success.main}})}),"¡Perfil Actualizado!"]}),r.jsx(u,{sx:{textAlign:"center",pb:2},children:r.jsx(i,{variant:"body1",sx:{color:P.palette.text.secondary},children:R("profile_cambios_exitosos")})}),r.jsx(b,{sx:{justifyContent:"center",pb:3,px:3},children:r.jsx(p,{variant:"contained",onClick:L,sx:{borderRadius:2,px:4,py:1,fontWeight:600,textTransform:"none"},children:"Continuar"})})]})]})};export{P as default};
