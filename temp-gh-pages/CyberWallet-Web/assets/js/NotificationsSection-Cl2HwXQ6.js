import{j as a,f as i,t as e,B as s,$ as n,a0 as t,Y as c,Z as o,_ as r,W as l}from"./chunk-CiyIQ443.js";import{r as d}from"./chunk-BP8el2rJ.js";import{N as u,a2 as f}from"./chunk-B1leO6dY.js";import{b as m,l as x}from"./index-B7Z_1TZN.js";import{m as h}from"./chunk-mLFKww0r.js";import"./chunk-BW7e_yWW.js";const j=()=>{const[j,v]=d.useState(!0),[y,g]=d.useState("instant"),[b,p]=d.useState(!0),{enqueueSnackbar:N}=m();return d.useEffect(()=>{const a=localStorage.getItem("notifications-enabled"),i=localStorage.getItem("notifications-frequency");null!==a&&v(JSON.parse(a)),i&&g(i),p("Notification"in window)},[]),a.jsxs(h.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.4},children:[a.jsx(i,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Notificaciones"}),!b&&a.jsx(e,{severity:"warning",sx:{mb:2},children:"Tu navegador no soporta notificaciones push."}),a.jsxs(s,{mt:2,display:"flex",flexDirection:"column",gap:3,children:[a.jsxs(s,{children:[a.jsx(n,{control:a.jsx(t,{checked:j,onChange:async()=>{const a=!j;a&&b?"granted"===await Notification.requestPermission()?(v(a),localStorage.setItem("notifications-enabled",JSON.stringify(a)),N("Notificaciones activadas correctamente",{variant:"success"}),x.info(`[INFO][Notifications] Notificaciones ${a?"activadas":"desactivadas"}.`)):N("Permiso de notificaciones denegado",{variant:"warning"}):(v(a),localStorage.setItem("notifications-enabled",JSON.stringify(a)),N("Notificaciones "+(a?"activadas":"desactivadas"),{variant:a?"success":"info"}),x.info(`[INFO][Notifications] Notificaciones ${a?"activadas":"desactivadas"}.`))},disabled:!b,inputProps:{"aria-label":"Activar notificaciones"}}),label:a.jsxs(s,{display:"flex",alignItems:"center",gap:1,children:[j?a.jsx(u,{fontSize:"small"}):a.jsx(f,{fontSize:"small"}),"Notificaciones push"]})}),a.jsx(i,{variant:"body2",color:"text.secondary",sx:{ml:5},children:j?"Recibirás notificaciones sobre transacciones y actividad de tu cuenta":"Las notificaciones están desactivadas"})]}),j&&a.jsxs(s,{children:[a.jsxs(c,{fullWidth:!0,size:"small",children:[a.jsx(o,{id:"frequency-label",children:"Frecuencia"}),a.jsxs(r,{labelId:"frequency-label",value:y,onChange:a=>{const i=a.target.value;g(i),localStorage.setItem("notifications-frequency",i),N(`Frecuencia configurada: ${{instant:"instantáneas",daily:"diarias",weekly:"semanales"}[i]}`,{variant:"success"}),x.info(`[INFO][Notifications] Frecuencia configurada: ${i}.`)},label:"Frecuencia",children:[a.jsx(l,{value:"instant",children:"Instantáneas"}),a.jsx(l,{value:"daily",children:"Resumen diario"}),a.jsx(l,{value:"weekly",children:"Resumen semanal"})]})]}),a.jsxs(i,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["instant"===y&&"Recibirás notificaciones inmediatamente cuando ocurra una transacción","daily"===y&&"Recibirás un resumen diario de todas las transacciones","weekly"===y&&"Recibirás un resumen semanal de la actividad de tu cuenta"]})]})]})]})};export{j as default};
