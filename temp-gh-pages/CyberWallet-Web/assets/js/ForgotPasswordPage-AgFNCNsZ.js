import{u as e,j as r,B as t,v as a,d as o,w as i,I as n,b as s,S as l,H as p,f as d,t as c,h as x,e as u}from"./chunk-CiyIQ443.js";import{r as m}from"./chunk-BP8el2rJ.js";import{V as g,h as b,I as f,W as h,E as k,j,k as v,l as w}from"./chunk-B1leO6dY.js";import{a as S}from"./chunk-Dt-y-CW8.js";import{g as y,l as F}from"./index-B7Z_1TZN.js";import{A as _,P as C}from"./chunk-DnQWkAvm.js";import"./chunk-BW7e_yWW.js";import"./chunk-mLFKww0r.js";const M=({enableVisibilityToggle:l=!1,validationStatus:p="default",isLoadingValidation:d=!1,tooltipMessage:c,maxLength:x,...u})=>{const v=e(),[w,S]=m.useState(!1),[y,F]=m.useState(!1),_=()=>{switch(p){case"success":return v.palette.success.main;case"error":return v.palette.error.main;case"warning":return v.palette.warning.main;default:return v.palette.primary.main}},C=(e,r=.3)=>`0 0 0 3px ${o(e,r)}`;return r.jsxs(t,{sx:{position:"relative",mb:2},children:[r.jsx(a,{...u,variant:"outlined",type:l&&"password"===u.type?w?"text":"password":u.type,InputProps:{...u.InputProps,endAdornment:r.jsxs(i,{position:"end",children:[(()=>{if(d)return r.jsx(t,{sx:{width:20,height:20,borderRadius:"50%",border:`2px solid ${v.palette.primary.main}`,borderTopColor:"transparent",animation:"spin 1s linear infinite"}});switch(p){case"success":return r.jsx(j,{sx:{color:v.palette.success.main,fontSize:20}});case"error":return r.jsx(k,{sx:{color:v.palette.error.main,fontSize:20}});case"warning":return r.jsx(h,{sx:{color:v.palette.warning.main,fontSize:20}});default:return null}})(),l&&"password"===u.type&&r.jsx(n,{onClick:()=>{S(!w)},edge:"end",sx:{ml:1},children:w?r.jsx(g,{}):r.jsx(b,{})}),c&&r.jsx(s,{title:c,open:y,onClose:()=>F(!1),placement:"top",children:r.jsx(n,{size:"small",onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),sx:{ml:1},children:r.jsx(f,{sx:{fontSize:18,color:v.palette.text.secondary}})})})]})},sx:{"& .MuiFormControl-root":{marginBottom:0},"& .MuiInputLabel-root":{color:"dark"===v.palette.mode?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.8)",fontWeight:500,fontSize:"0.875rem",transform:"translate(14px, 16px) scale(1)","&.Mui-focused":{color:_(),transform:"translate(14px, -9px) scale(0.75)"},"&.Mui-error":{color:v.palette.error.main},"&.MuiInputLabel-shrink":{transform:"translate(14px, -9px) scale(0.75)"}},"& .MuiOutlinedInput-root":{backgroundColor:"dark"===v.palette.mode?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",border:`1px solid ${o(v.palette.primary.main,.2)}`,borderRadius:"12px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"dark"===v.palette.mode?"inset 2px 2px 4px rgba(0, 0, 0, 0.3), inset -2px -2px 4px rgba(255, 255, 255, 0.05)":"inset 2px 2px 4px rgba(0, 0, 0, 0.1), inset -2px -2px 4px rgba(255, 255, 255, 0.8)",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",paddingRight:"16px","&:hover":{borderColor:o(v.palette.primary.main,.4),backgroundColor:"dark"===v.palette.mode?"rgba(255, 255, 255, 0.08)":"rgba(255, 255, 255, 0.9)",boxShadow:"dark"===v.palette.mode?"inset 2px 2px 4px rgba(0, 0, 0, 0.4), inset -2px -2px 4px rgba(255, 255, 255, 0.08), 0 0 0 2px rgba(99, 102, 241, 0.1)":"inset 2px 2px 4px rgba(0, 0, 0, 0.15), inset -2px -2px 4px rgba(255, 255, 255, 0.9), 0 0 0 2px rgba(99, 102, 241, 0.08)"},"&.Mui-focused":{borderColor:_(),backgroundColor:"dark"===v.palette.mode?"rgba(255, 255, 255, 0.1)":"rgba(255, 255, 255, 1)",boxShadow:"dark"===v.palette.mode?`inset 1px 1px 2px rgba(0, 0, 0, 0.2), inset -1px -1px 2px rgba(255, 255, 255, 0.1), ${C(_(),.3)}`:`inset 1px 1px 2px rgba(0, 0, 0, 0.1), inset -1px -1px 2px rgba(255, 255, 255, 1), ${C(_(),.2)}`,transform:"translateY(-1px)"},"&.Mui-error":{borderColor:v.palette.error.main,boxShadow:"dark"===v.palette.mode?`inset 1px 1px 2px rgba(0, 0, 0, 0.2), inset -1px -1px 2px rgba(255, 255, 255, 0.1), ${C(v.palette.error.main,.3)}`:`inset 1px 1px 2px rgba(0, 0, 0, 0.1), inset -1px -1px 2px rgba(255, 255, 255, 1), ${C(v.palette.error.main,.2)}`},"& input":{color:"dark"===v.palette.mode?"#F8FAFC":"#1F2937",fontSize:"1rem",fontWeight:500,padding:"8px 0","&::placeholder":{color:"dark"===v.palette.mode?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)",opacity:1}},"& textarea":{color:"dark"===v.palette.mode?"#F8FAFC":"#1F2937",fontSize:"1rem",fontWeight:500,padding:"8px 0","&::placeholder":{color:"dark"===v.palette.mode?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)",opacity:1}},"& .MuiSelect-select":{color:"dark"===v.palette.mode?"#F8FAFC":"#1F2937",fontSize:"1rem",fontWeight:500,padding:"8px 0"},"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiInputAdornment-root":{marginLeft:1,"& .MuiIconButton-root":{color:v.palette.text.secondary,"&:hover":{color:_(),backgroundColor:o(_(),.1)}}}},"& .MuiFormHelperText-root":{color:"dark"===v.palette.mode?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)",fontSize:"0.875rem",fontWeight:400,marginTop:"8px",marginLeft:"16px","&.Mui-error":{color:v.palette.error.main}}}}),x&&r.jsxs(t,{sx:{position:"absolute",bottom:-24,right:0,fontSize:"0.75rem",color:v.palette.text.secondary,backgroundColor:"dark"===v.palette.mode?"rgba(0, 0, 0, 0.8)":"rgba(255, 255, 255, 0.9)",padding:"2px 6px",borderRadius:"4px",backdropFilter:"blur(4px)",border:`1px solid ${o(v.palette.text.secondary,.2)}`},children:[u.value?.toString().length||0,"/",x]})]})},P=({variant:a,width:i,height:n,animation:s="wave",sx:p={},count:d=1,ariaLabel:c="Cargando..."})=>{const x=e();m.useEffect(()=>{},[a,i,n,s,d]);const u=Math.max(1,d),g=o(x.palette?.custom?.neumoDarkShadow||"#000",.4),b=o(x.palette?.custom?.neumoLightShadow||"#fff",.5),f={backgroundColor:x.palette.custom?.neumoSurface||x.palette.background.paper,borderRadius:"circular"===a?"50%":"12px",boxShadow:`2px 2px 5px ${g}, -2px -2px 5px ${b}`,transition:"all 0.3s ease-in-out","&::after":{background:`linear-gradient(90deg, transparent, ${o(x.palette.text.primary,.1)}, transparent)`},...p},h=Array.from({length:u}).map((e,t)=>r.jsx(l,{variant:a,width:i,height:n,animation:s,sx:f,role:"status","aria-label":c},t));return u>1?r.jsx(t,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:h}):h[0]},E=()=>{const a=e(),n="dark"===a.palette.mode,l=y(n),[g,b]=m.useState(""),[f,h]=m.useState(!1),[k,E]=m.useState(null),[z,I]=m.useState(null),[$,R]=m.useState(!1),[L,T]=m.useState(!1),[W,A]=m.useState(!0);m.useEffect(()=>()=>{},[]),m.useEffect(()=>{const e=setTimeout(()=>{A(!1)},1e3);return()=>clearTimeout(e)},[]);const B=e=>({"forgot.email_required":"El email es obligatorio.","forgot.email_invalid":"El formato del email no es válido.","forgot.email_valid":"Email válido","forgot.email_invalid_tooltip":"Email inválido","forgot.send_link":"Enviar Enlace de Restablecimiento","forgot.back_to_login":"Volver al login","forgot.success":"¡Listo! Si el correo ingresado está registrado, recibirás instrucciones para recuperar tu contraseña en breve.","forgot.general_error":"Por favor, corrige el email antes de continuar.","forgot.title":"Recuperar Contraseña","forgot.email_label":"Correo electrónico","forgot.email_placeholder":"Ingresa tu correo electrónico registrado"}[e]||e),D=e=>e.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?null:B("forgot.email_invalid"):B("forgot.email_required"),O=async e=>{e&&e.preventDefault(),h(!0),I(null),R(!1);const r=D(g);if(r)return E(r),I(B("forgot.general_error")),void document.getElementById("forgot-email")?.focus();T(!0),F.info("[INFO][PROD][ForgotPasswordPage] Solicitud de restablecimiento iniciada.");try{const e=await S.post("/auth/forgot-password",{email:g});e?.data?.message?(R(!0),F.info("[INFO][PROD][ForgotPasswordPage] Enlace de recuperación enviado.")):(I("No se recibió una respuesta válida del servidor al solicitar el restablecimiento."),F.error("[ERROR][PROD][ForgotPasswordPage] Fallo de respuesta de servidor en recuperación de contraseña."))}catch(t){const e=t,r=e?.response?.data?.detail||"Error al enviar el email de recuperación";I(r),F.error("[ForgotPassword] Error HTTP:",r)}finally{T(!1)}},V=L||f&&!!k;return r.jsx(_,{children:r.jsx(C,{maxWidth:480,children:W?r.jsxs(p,{spacing:3,children:[r.jsx(P,{variant:"rectangular",height:56}),r.jsx(P,{variant:"rectangular",height:48,width:"60%",sx:{mx:"auto"}}),r.jsx(P,{variant:"rectangular",height:36,width:"40%",sx:{mx:"auto"}})]}):r.jsxs(t,{sx:{width:"100%",backgroundColor:l.surface.primary,backdropFilter:"blur(15px) saturate(180%)",borderRadius:4,boxShadow:`0 8px 30px ${o(a.palette.custom.neumoDarkShadow,"dark"===a.palette.mode?.7:.3)}`,border:`1px solid ${a.palette.custom.glassBorder}`,transition:"all 0.3s ease-in-out",p:{xs:3,sm:4},position:"relative",zIndex:1},children:[r.jsx(d,{variant:"h5",gutterBottom:!0,sx:{textAlign:"center",color:a.palette.primary.main,mb:3,fontWeight:600},children:B("forgot.title")}),r.jsxs("form",{onSubmit:O,onKeyDown:e=>{"Enter"===e.key&&O(e)},children:[r.jsx(M,{id:"forgot-email",label:B("forgot.email_label"),name:"email",fullWidth:!0,required:!0,value:g,onChange:e=>{const r=e.target.value;b(r);const t=D(r);E(t),z&&!t&&I(null)},onBlur:()=>{h(!0);const e=D(g);E(e)},error:f&&!!k,helperText:f&&k||" ",validationStatus:g?k?"error":"success":"default",tooltipMessage:B("forgot.email_placeholder"),inputProps:{"aria-label":B("forgot.email_label")},autoComplete:"email",inputMode:"email",maxLength:64,sx:{mb:2,transition:"box-shadow 0.2s",boxShadow:f&&k?`0 0 0 2px ${a.palette.error.main}`:f&&!k&&g?`0 0 0 2px ${a.palette.success.main}`:void 0},InputProps:{startAdornment:r.jsx(i,{position:"start",children:r.jsx(s,{title:B("forgot.email_label"),arrow:!0,children:r.jsx(w,{sx:{color:a.palette.text.secondary}})})}),endAdornment:f&&g?k?r.jsx(i,{position:"end",children:r.jsx(s,{title:B("forgot.email_invalid_tooltip"),arrow:!0,children:r.jsx(v,{color:"error"})})}):r.jsx(i,{position:"end",children:r.jsx(s,{title:B("forgot.email_valid"),arrow:!0,children:r.jsx(j,{color:"success"})})}):null,"aria-invalid":Boolean(f&&k),"aria-describedby":"forgot-email-helper"},FormHelperTextProps:{id:"forgot-email-helper","aria-live":"polite"}}),z&&r.jsx(c,{severity:"error",sx:{mt:2},children:z}),$&&r.jsx(c,{severity:"success",sx:{mt:2},children:"¡Listo! Si el correo ingresado está registrado, recibirás instrucciones para recuperar tu contraseña en breve."}),r.jsx(x,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{mt:3,px:{xs:4,sm:6},py:{xs:1.5,sm:2},fontSize:{xs:"1rem",sm:"1.1rem"},boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"background 0.2s, transform 0.1s","&:hover":{background:a.palette.primary.dark,transform:"scale(1.02)"}},disabled:V,"aria-label":B("forgot.send_link"),children:L?r.jsx(u,{size:24,sx:{color:"white"}}):B("forgot.send_link")}),r.jsx(x,{fullWidth:!0,variant:"text",onClick:()=>{window.location.href="/login"},sx:{mt:1.5,fontSize:"0.9rem",color:a.palette.text.secondary,"&:hover":{color:a.palette.primary.main,textDecoration:"underline",transform:"translateY(-1px)"},transition:"transform 0.2s ease-in-out"},"aria-label":B("forgot.back_to_login"),children:"Volver al login"})]})]})})})};export{E as default};
