import{w as e,j as r,k as a,Q as t,S as o,r as i,D as s,E as l,G as n,K as p,O as d,P as m}from"./index-CAkMPucN.js";import{u as c}from"./useTranslation-AM22nTX-.js";import{P as x}from"./Paper-DiZFp9lZ.js";import{A as u}from"./Avatar-c6ac4g8k.js";import{I as b}from"./IconButton-Dgo8PozH.js";import{P as f}from"./PhotoCamera-CjLgO_6H.js";import{T as h}from"./TextField-I4fxrPOr.js";import{I as j}from"./InputAdornment-BdqI-dld.js";import{B as g}from"./Button-BXsVoJ5T.js";import{D as y,a as v,b as k,c as C}from"./DialogTitle-ByEE1fuE.js";import{C as P}from"./CheckCircle-C0pduSvW.js";import"./Select-BRxYfMSs.js";import"./useFormControl-CyOgmSPV.js";import"./List-CGGHAjoq.js";import"./isHostComponent-DS5evmks.js";import"./mergeSlotProps-CeDtsuiT.js";const S=e(r.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),$=e(r.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),z=()=>{const e=a(),z="dark"===e.palette.mode,A=p(z),{user:w}=t(),{enqueueSnackbar:_}=o(),{t:T}=c("common"),[I,R]=i.useState({calle:"",numero:""}),[M,W]=i.useState(!1),[D,B]=i.useState({}),[E,F]=i.useState(!1),[H,L]=i.useState(null);i.useEffect(()=>{R({calle:"Av. Corrientes",numero:"1234"})},[]);const O=e=>r=>{R(a=>({...a,[e]:r.target.value})),D[e]&&B(r=>({...r,[e]:""}))},q=()=>{F(!1)};return r.jsxs(s,{sx:{maxWidth:600,mx:"auto",p:3,minHeight:"100vh",background:"dark"===e.palette.mode?`linear-gradient(135deg, ${l(e.palette.primary.main,.05)} 0%, ${l(e.palette.secondary.main,.05)} 100%)`:`linear-gradient(135deg, ${l(e.palette.primary.main,.02)} 0%, ${l(e.palette.secondary.main,.02)} 100%)`},children:[r.jsxs(x,{elevation:8,sx:{p:4,borderRadius:3,background:"dark"===e.palette.mode?"rgba(18, 24, 38, 0.9)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:`1px solid ${l(e.palette.divider,.2)}`,boxShadow:`0 8px 32px ${l(e.palette.common.black,.1)}`},children:[r.jsxs(s,{sx:{textAlign:"center",mb:4},children:[r.jsx(n,{variant:"h4",component:"h1",sx:{fontWeight:700,color:e.palette.primary.main,mb:1,textShadow:`0 2px 4px ${l(e.palette.primary.main,.3)}`},children:T("profile_titulo")}),r.jsx(n,{variant:"body2",sx:{color:e.palette.text.secondary,opacity:.8},children:T("profile_subtitulo")})]}),r.jsxs(s,{sx:{textAlign:"center",mb:4},children:[r.jsxs(s,{sx:{position:"relative",display:"inline-block"},children:[r.jsx(u,{src:H||void 0,sx:{width:100,height:100,fontSize:"2rem",backgroundColor:e.palette.primary.main,border:`3px solid ${e.palette.primary.main}`,boxShadow:`0 4px 12px ${l(e.palette.primary.main,.4)}`},children:w?.alias?.charAt(0).toUpperCase()||"U"}),r.jsxs(b,{component:"label",sx:{position:"absolute",bottom:0,right:0,backgroundColor:A.surface.primary,border:`2px solid ${e.palette.primary.main}`,"&:hover":{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText}},children:[r.jsx(f,{}),r.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>{const r=e.target.files?.[0];if(r){const e=new FileReader;e.onload=e=>{L(e.target?.result)},e.readAsDataURL(r)}}})]})]}),r.jsx(n,{variant:"body2",sx:{mt:1,color:e.palette.text.secondary},children:T("profile_avatar_desc")})]}),r.jsxs(s,{component:"form",onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return I.calle.trim()||(e.calle="La calle es requerida"),I.numero.trim()||(e.numero="El número es requerido"),B(e),0===Object.keys(e).length})()){W(!0);try{await new Promise(e=>setTimeout(e,1e3)),m.info("[ProfilePage] Perfil actualizado exitosamente"),F(!0),_("Perfil actualizado correctamente",{variant:"success"})}catch(r){m.error("[ProfilePage] Error al actualizar perfil:",r),_("Error al actualizar el perfil",{variant:"error"})}finally{W(!1)}}else _("Por favor, corrige los errores del formulario",{variant:"error"})},sx:{display:"flex",flexDirection:"column",gap:3},children:[r.jsx(h,{fullWidth:!0,label:T("profile_calle_label"),variant:"outlined",value:I.calle,onChange:O("calle"),error:!!D.calle,helperText:D.calle,InputProps:{startAdornment:r.jsx(j,{position:"start",children:r.jsx(S,{sx:{color:e.palette.text.secondary}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2,"&:hover fieldset":{borderColor:e.palette.primary.main},"&.Mui-focused fieldset":{borderColor:e.palette.primary.main}}}}),r.jsx(h,{fullWidth:!0,label:T("profile_numero_label"),variant:"outlined",value:I.numero,onChange:O("numero"),error:!!D.numero,helperText:D.numero,InputProps:{startAdornment:r.jsx(j,{position:"start",children:r.jsx(S,{sx:{color:e.palette.text.secondary}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2,"&:hover fieldset":{borderColor:e.palette.primary.main},"&.Mui-focused fieldset":{borderColor:e.palette.primary.main}}}}),r.jsx(g,{type:"submit",variant:"contained",size:"large",disabled:M,startIcon:M?r.jsx(d,{size:20}):r.jsx($,{}),sx:{mt:2,py:1.5,borderRadius:2,fontWeight:600,textTransform:"none",fontSize:"1.1rem",background:`linear-gradient(135deg, ${e.palette.primary.main} 0%, ${e.palette.primary.dark} 100%)`,boxShadow:`0 4px 12px ${l(e.palette.primary.main,.4)}`,"&:hover":{background:`linear-gradient(135deg, ${e.palette.primary.dark} 0%, ${e.palette.primary.main} 100%)`,boxShadow:`0 6px 20px ${l(e.palette.primary.main,.6)}`,transform:"translateY(-1px)"},"&:disabled":{background:e.palette.action.disabledBackground,color:e.palette.action.disabled}},children:M?"Guardando...":T("profile_guardar_cambios")})]})]}),r.jsxs(y,{open:E,onClose:q,PaperProps:{sx:{borderRadius:3,background:A.surface.primary,boxShadow:`0 8px 32px ${l(e.palette.common.black,.2)}`}},children:[r.jsxs(v,{sx:{textAlign:"center",pb:1},children:[r.jsx(s,{sx:{display:"flex",justifyContent:"center",mb:2},children:r.jsx(P,{sx:{fontSize:60,color:e.palette.success.main}})}),"¡Perfil Actualizado!"]}),r.jsx(k,{sx:{textAlign:"center",pb:2},children:r.jsx(n,{variant:"body1",sx:{color:e.palette.text.secondary},children:T("profile_cambios_exitosos")})}),r.jsx(C,{sx:{justifyContent:"center",pb:3,px:3},children:r.jsx(g,{variant:"contained",onClick:q,sx:{borderRadius:2,px:4,py:1,fontWeight:600,textTransform:"none"},children:"Continuar"})})]})]})};export{z as default};
