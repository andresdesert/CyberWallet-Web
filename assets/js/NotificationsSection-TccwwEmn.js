import{w as i,j as a,r as e,S as s,F as t,G as n,D as o,P as c}from"./index-CAkMPucN.js";import{N as r}from"./NotificationsActive-CPBNmg4I.js";import{A as l}from"./Alert-BAPMIHz2.js";import{F as d,S as m}from"./Switch-DA4cNyCz.js";import{F as u,I as f,S as j}from"./Select-BRxYfMSs.js";import{M as p}from"./MenuItem-B8sLW_WZ.js";import"./IconButton-Dgo8PozH.js";import"./Paper-DiZFp9lZ.js";import"./useFormControl-CyOgmSPV.js";import"./List-CGGHAjoq.js";import"./isHostComponent-DS5evmks.js";import"./mergeSlotProps-CeDtsuiT.js";import"./listItemIconClasses-DXXaQorL.js";import"./listItemTextClasses-jva935Ny.js";import"./dividerClasses-DOgubGFh.js";const v=i(a.jsx("path",{d:"M20 18.69 7.84 6.14 5.27 3.49 4 4.76l2.8 2.8v.01c-.52.99-.8 2.16-.8 3.42v5l-2 2v1h13.73l2 2L21 19.72zM12 22c1.11 0 2-.89 2-2h-4c0 1.11.89 2 2 2m6-7.32V11c0-3.08-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68c-.15.03-.29.08-.42.12-.1.03-.2.07-.3.11h-.01c-.01 0-.01 0-.02.01-.23.09-.46.2-.68.31 0 0-.01 0-.01.01z"})),x=()=>{const[i,x]=e.useState(!0),[h,g]=e.useState("instant"),[y,S]=e.useState(!0),{enqueueSnackbar:b}=s();return e.useEffect(()=>{const i=localStorage.getItem("notifications-enabled"),a=localStorage.getItem("notifications-frequency");null!==i&&x(JSON.parse(i)),a&&g(a),S("Notification"in window)},[]),a.jsxs(t.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.4},children:[a.jsx(n,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Notificaciones"}),!y&&a.jsx(l,{severity:"warning",sx:{mb:2},children:"Tu navegador no soporta notificaciones push."}),a.jsxs(o,{mt:2,display:"flex",flexDirection:"column",gap:3,children:[a.jsxs(o,{children:[a.jsx(d,{control:a.jsx(m,{checked:i,onChange:async()=>{const a=!i;a&&y?"granted"===await Notification.requestPermission()?(x(a),localStorage.setItem("notifications-enabled",JSON.stringify(a)),b("Notificaciones activadas correctamente",{variant:"success"}),c.info(`[INFO][Notifications] Notificaciones ${a?"activadas":"desactivadas"}.`)):b("Permiso de notificaciones denegado",{variant:"warning"}):(x(a),localStorage.setItem("notifications-enabled",JSON.stringify(a)),b("Notificaciones "+(a?"activadas":"desactivadas"),{variant:a?"success":"info"}),c.info(`[INFO][Notifications] Notificaciones ${a?"activadas":"desactivadas"}.`))},disabled:!y,inputProps:{"aria-label":"Activar notificaciones"}}),label:a.jsxs(o,{display:"flex",alignItems:"center",gap:1,children:[i?a.jsx(r,{fontSize:"small"}):a.jsx(v,{fontSize:"small"}),"Notificaciones push"]})}),a.jsx(n,{variant:"body2",color:"text.secondary",sx:{ml:5},children:i?"Recibirás notificaciones sobre transacciones y actividad de tu cuenta":"Las notificaciones están desactivadas"})]}),i&&a.jsxs(o,{children:[a.jsxs(u,{fullWidth:!0,size:"small",children:[a.jsx(f,{id:"frequency-label",children:"Frecuencia"}),a.jsxs(j,{labelId:"frequency-label",value:h,onChange:i=>{const a=i.target.value;g(a),localStorage.setItem("notifications-frequency",a),b(`Frecuencia configurada: ${{instant:"instantáneas",daily:"diarias",weekly:"semanales"}[a]}`,{variant:"success"}),c.info(`[INFO][Notifications] Frecuencia configurada: ${a}.`)},label:"Frecuencia",children:[a.jsx(p,{value:"instant",children:"Instantáneas"}),a.jsx(p,{value:"daily",children:"Resumen diario"}),a.jsx(p,{value:"weekly",children:"Resumen semanal"})]})]}),a.jsxs(n,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["instant"===h&&"Recibirás notificaciones inmediatamente cuando ocurra una transacción","daily"===h&&"Recibirás un resumen diario de todas las transacciones","weekly"===h&&"Recibirás un resumen semanal de la actividad de tu cuenta"]})]})]})]})};export{x as default};
